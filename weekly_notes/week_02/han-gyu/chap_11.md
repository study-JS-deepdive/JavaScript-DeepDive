### 11장 원시 값과 객체의 비교

- **원시타입**
    - 원시타입의 값 : 변경 불가능한 값
    - 변수에 할당 시 메모리 공간에 실제 값 저장
    - 값에 의한 전달 : 원시 값을 복사하여 다른 변수에 할당 시 원시 값 복사하여 전달 됌
- **객체타입**
    - 객체(참조) 타입의 값, 변경가능한 값
    - 변수 할당 시 메모리 공간에 참조값 저장
    - 참조에 의한 전달 : 객체를 가리키는 변수를 다른 변수에 할당 시 참조 값이 복사되어 전달

---

### 11.1 원시 값

- 변경 불가능한 값, 읽기 전용
- 변수 : 하나의 값을 저장하기 위해 확보한 메모리 공간 자체
- 값 : 변수에 저장된 데이터, 표현식이 평가되어 생성된 결과

- 원시 값을 변경하지 못한 다 → 원시 값 자체를 변경할 수 없다.
    - 변수의 값은 변경이 가능하다.

- 상수 : 재할당이 금지된 변수

```jsx
const o = {};

o.a = 1;
// const 키워드를 사용해 선언한 변수에 할당한 객체는 변경 가능
```

- 불변성 : 원시값은 변경 불가능, 재할당 시 메모리 공간의 주소가 바뀐다.

- 문자열과 불변성
    - 자바스크립트의 문자열은 원시 타입, 변경 불가능
    - 문자열이 생성된 이후에는 변경할 수 없음

```jsx
var str = 'Hello';
str = 'World';
```

- 메모리 상에는 Hello, Word 두가지가 모두 존재
    - World 를 가리키도록 변경됨

- 문자열은 유사배열 객체, 이터러블 각 문자에 접근 가능
- 유사 배열 객체
    - 배열처럼 인덱스로 프로퍼티 값에 접근 가능 length 프로퍼티를 갖는 객체

```jsx
var str = 'string';

console.log(str[0]); // s

console.log(str.length); // 6
```

- 문자열은 원시 값이므로 변경할 수 없다

```jsx
var str = 'string';

str[0] = 'S';

console.log(str); // string
```

- 값에 의한 전달

```jsx
var score = 80;
var copy = score;

console.log(score); // 80
console.log(copy); // 80

score = 100;

console.log(score); // 100
console.log(copy); // 80

// 변수에 원시값을 같은 변수를 할당하면 할당받는 변수에는 할당되는 변수의 원시값이 
// 복사되어 전달된다. 

// score 변수와 copy 변수의 값 80은 다른 메모리 공간에 저장된 별개의 값이다.
```

---

### 11.2 객체

- 객체의 프로퍼티 개수는 정해져있지 않으며, 동적으로 추가 삭제가 가능하다.

### 11.2.1 변경 가능한 값

- 객체(참조) 타입의 값, 객체는 변경 가능한 값
- 객체를 할당한 변수가 기억하는 메모리 주소를 통해 메모리 공간에 접근 시 참조 값에 접근 가능하다.
    - 객체를 할당한 변수를 참조하면 메모리에 저장되어 있는 참조 값을 통해 실제 객체에 접근

- 원시 값을 갖는 변수 변경 방법은 재할당 뿐
- 객체를 할당한 변수는 재할당 없이 객체를 직접 변경할 수 있다.

```jsx
var person = {
 name: 'Lee',
}

// 프로퍼티 값 갱신
person.name = 'Kim';

// 프로퍼티 동적 생성
person.address = 'Seoul';

console.log(person); // { name: 'Kim', address: 'Seoul' }
```

- 객체가 변경 가능한 값으로 설계된 이유
    - 효율적인 메모리 사용을 위해
    - 객체는 생성함에따라 크기가 클 수도 있고 복사, 생성 비용이 많이 듬

- 단점
    - 여러 개의 식별자가 하나의 객체를 공유할 수 있음

- 얕은 복사
    - 객체를 프로퍼티 값으로 갖는 객체, 한 단계만 복사
    - 참조 값을 복사
- 깊은 복사
    - 객체에 중첩되어 있는 객체까지 모두 복사
    - 객체에 중첩되어 있는 객체까지 모두 복사, 원시 값처럼 완전한 복사본 생성

```jsx
const o = { x: { y: 1} };

// 얕은 복사
const c1 = { ...o };
console.log(c1 === o);
console.log(c1.x === o.x);

// 깊은 복사
const _ = require('lodash');

const c2 = _.cloneDeep(o);
console.log(c2 === o);
console.log(c2.x === o.x);

```

---

### 11.2.2 참조에 의한 전달

- 여러 개의 식별자가 하나의 객체를 공유할 수 있다

```jsx
var person = {
 name: 'Lee'
};

// 참조 값을 복사(얕은 복사)
var copy = person;

// 두개의 식별자가 하나의 객체를 공유한다.
// 어느 한쪽 객체를 변경 시 서로 영향을 받게 된다.
```

- 자바스크립트에는 참조에 의한 전달은 존재하지 않고, 값에 의한 전달 만 존재한다.
