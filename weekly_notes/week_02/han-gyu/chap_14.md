### 14장 전역 변수의 문제점

- 무분별한 전역변수 사용은 위험하다.

### 14.1 변수의 생명 주기

- 변수는 선언에 의해 생성되고 할당에 의해 값을 가지고 언젠가 소멸
    - 이를 변수의 생명주기라 한다.

- 전역변수의 생명주기는 애플리케이션의 생명주기와 같다.

- 함수 내부에서 선언된 지역 변수는 함수가 호출되면 생성되고 함수가 종료되면 소멸한다.

```jsx
function fuc() {

  var x = 'local';
  console.log(x); // local
  return x;
  
}

fuc();
console.log(x); // ReferenceError
```

- 함수 내부에서 선언한 변수는 함수가 호출된 직후, 자바스크립트 엔진에 의해 먼저 실행된다.
- 지역 변수의 생명 주기는 함수의 생명 주기와 일치한다.

- 호이스팅은 스코프 단위로 동작
- 호이스팅 : 변수 선언이 스코프의 선두로 끌어 올려진 것처럼 동작하는 자바스크립트 고유의 특징

### 14.1.2 전역 변수의 생명주기

- 전역객체 : 자바스크립트 엔진에 의해 어떤 객체보다도 먼저 생성되는 특수한 객체
- var 로 선언한 전역 변수의 생명주기 === 전역 객체의 생명주기

---

### 14.2 전역 변수의 문제점

- 암묵적 결합
    - 모든 코드가 전역 변수를 참조하고 변경 가능
- 긴 생명주기
    - 전역 변수는 생명 주기가 길다.
- 스코프 체인 상 종점에 존재
    - 전역 변수의 검색 속도가 가장 느리다.
- 네임스페이스 오염
    - 파일이 분리되어 있어도 하나의 전역 스코프를 공유한다.

---

### 14.3 전역 변수의 사용을 억제하는 방법

- 전역 변수를 반드시 사용해야 할 이유를 찾지 못한다면 지역변수를 사용해야한다.
- 변수의 스코프는 좁을수록 좋다

### 14.3.1 즉시 실행 함수

```jsx
// 모든 코드를 즉시 실행으로 감싼다.

(function () {
 var func = 10;
 // ...
}());
```

### 14.3.2 네임스페이스 객체

- 전역에 네임스페이스 담당 객체 생성
- 전역 변수처럼 사용하고 싶은 변수 → 프로퍼티로 추가

### 14.3.3 모듈 패턴

- 변수와 함수를 모아 즉시 실행 함수로 감싸 하나의 모듈을 만든다.
- 클로저 기반으로 동작
- 전역 변수의 억제, 캡슐화 까지 구현

### 14.3.4  ES6 모듈

- **ES6 모듈 :** 파일 자체에 독자적인 모듈 스코프를 제공
- 파일의 확장자 mjs
