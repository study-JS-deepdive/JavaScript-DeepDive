# 13장 스코프

## 1. 스코프란?

스코프(유효범위) : 식별자가 유효함 범위. 선언된 위치에 의해 결정됨.

식별자 결정 : 자바스크립트 엔진이 이름이 같은 두 식별자 중에 어떤 식별자를 참조해야 할 것인지를 결정하는 것.

```jsx
var x = "global";

function foo() {
  var x = "local";
  console.log(x); // local
}

foo();
console.log(x); // global
```

네임스페이스 : 스코프 내에서 식별자는 유일해야 함. 다만, 다른 스코프에는 같은 이름의 식별자를 사용할 수 있음.

---

## 2. 스코프의 종류

**전역과 지역으로 구분됨.**

![image.png](attachment:694544f3-3fda-46f4-982c-f7c205aafaf3:image.png)

### 2-1. 전역과 전역 스코프

전역 : 코드의 가장 바깥 영역

전역 스코프 : 전역에 변수를 선언할 경우 전역 스코프를 갖는 전역 변수가 됨. **전역 변수는 어디서든지 참조 가능.**

### 2-2. 지역과 지역 스코프

지역 : 함수 몸체 내부. 지역 스코프를 만듦.

지역 스코프 : 지역에 변수를 선언할 경우 지역 스코프를 갖는 지역 변수가 됨. 지역 변수는 자신의 지역 스코프와 하위 스코프(내부 함수)에서 유효함.

---

## 3. 스코프 체인

**스코프 체인** : 모든 스코프는 하나의 계층적 구조로 연결됨. 최상위 스코프는 전역 스코프임.

- 
    
    변수를 참조할 때 자바스크립트 엔진은 스코프 체인을 통해 변수를 참조하는 코드의 스코프에서 시작하여 상위 스코프 방향으로 이동하며 선언된 변수를 검색함.
    

![image.png](attachment:1a5282a8-e224-4d08-926a-074b0d4770ba:image.png)

### 3-1. 스코프 체인에 의한 변수 검색

상위 스코프에서 유효한 변수는 하위 스코프에서 자유롭게 참조할 수 있음.

하위 스코프에서 유효한 변수는 상위 스코프에서 참조할 수 없음.

### 3-4. 스코프 체인에 의한 함수 검색

함수 선언문 으로 함수를 정의 시 : 런타임 이전에 함수 객체가 먼저 생성됨.

아래 예제의 함수들은 함수 이름과 동일한 이름의 식별자를 암묵적으로 선언하고 식별자 foo와 bar를  검색함.

**함수도 식별자에 할당되기 때문에 , 스코프를 가짐 ➔ 스코프는 식별자를 검색하는 규칙**

- 
    
    ```jsx
    // 전역 함수
    function foo() {
      console.log("global function foo");
    }
    
    function bar() {
      // 중첩 함수
      function foo() {
        console.log("local function foo");
      }
    
      foo(); // local function foo
    }
    
    bar(); // undefined?
    ```
    

---

## 4. 함수 레벨 스코프

**블록 레벨 스코프(block level scope)**

함수 몸체만이 아니라 모든 코드 블록( if, for, while, try/catch 등 )이 지역 스코프를 만듦.

**함수 레벨 스코프(function level scope)**

자바스크립트에서 var 키워드로 선언된 변수는 오로지 함수의 코드블록(함수 몸체)만을 지역 스코프로 인정함.

```jsx
// 전역 변수 x가 선언됨.
var x = 1;

if (true) {
  // x는 전역 변수임. 이미 선언된 전역 변수가 있으므로 x는 중복 선언됨.
  // 재할당으로 인해 의도치 않게 변수 값이 변경됨.
  var x = 10;
}

console.log(x); // 10
```

---

## 5. 렉시컬 스코프

자바스크립트는 렉시컬 스코프를 따름.

**렉시컬 스코프(정적 스코프)** : 함수를 어디서 정의했는지에 따라 함수의 상위 스코프를 결정하는 것.. 함수가 호출된 위치는 영향을 주지 않음.
